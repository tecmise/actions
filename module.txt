# 📊 Relatório de Escaneamento de Diretório

**Data de Geração:** 28/08/2025 15:32:45  
**Diretório Base:** `terraform/api-gateway-resource-verbs`  

## ⚙️ Configurações Utilizadas

- **Pastas Ignoradas:** Nenhuma
- **Extensões Ignoradas:** Nenhuma
- **Arquivo de Saída:** `result.txt`

## 📁 Arquivos Encontrados

**7 Arquivos**  
**1 Pastas**

### 📈 Resumo por Extensão

| Extensão | Quantidade | Tamanho Total |
|----------|------------|---------------|
| `.tf` | 7 | 7.6 KB |

**Tamanho Total:** 7.6 KB

### 📋 Lista Detalhada

#### 📂 Pasta `terraform/api-gateway-resource-verbs/(raiz)`

**1. integration.tf**

- 📍 **Caminho:** `integration.tf`
- 📏 **Tamanho:** 665.0 B

```tf
resource "aws_api_gateway_integration" "default" {
  depends_on                = [  aws_api_gateway_method.default ]
  http_method               = aws_api_gateway_method.default.http_method
  integration_http_method   = var.integration_http_method
  resource_id               = var.resource_id
  rest_api_id               = var.rest_api_id
  uri                       = var.uri
  type                      = var.integration_type
  request_parameters        = var.integration_request_parameters
  request_templates         = var.append_authorizer_on_request ? merge(local.authorizer_appender, var.integration_request_templates) : var.integration_request_templates
}
```

**2. integration_response.tf**

- 📍 **Caminho:** `integration_response.tf`
- 📏 **Tamanho:** 510.0 B

```tf
resource "aws_api_gateway_integration_response" "default" {
  count = var.has_integration_response ? 1 : 0
  depends_on  = [aws_api_gateway_integration.default, aws_api_gateway_method_response.default]
  http_method = var.integration_response_http_method
  resource_id = var.resource_id
  rest_api_id = var.rest_api_id
  status_code = var.integration_response_status_code
  response_templates = var.integration_response_response_templates
  response_parameters = var.integration_response_response_parameters
}
```

**3. locals.tf**

- 📍 **Caminho:** `locals.tf`
- 📏 **Tamanho:** 3.5 KB

```tf
locals {
  authorizer_appender = {
    "application/json" = <<EOF
#set($inputRoot = $input.json('$'))

{
    "resource": "$context.resourcePath",
    "path": "$context.path",
    "httpMethod": "$context.httpMethod",
    "headers": {
        "Accept": "$input.params().header.get('Accept')",
        "Authorization": "$input.params().header.get('Authorization')",
        "CloudFront-Forwarded-Proto": "$input.params().header.get('CloudFront-Forwarded-Proto')",
        "CloudFront-Is-Desktop-Viewer": "$input.params().header.get('CloudFront-Is-Desktop-Viewer')",
        "CloudFront-Is-Mobile-Viewer": "$input.params().header.get('CloudFront-Is-Mobile-Viewer')",
        "CloudFront-Is-SmartTV-Viewer": "$input.params().header.get('CloudFront-Is-SmartTV-Viewer')",
        "CloudFront-Is-Tablet-Viewer": "$input.params().header.get('CloudFront-Is-Tablet-Viewer')",
        "CloudFront-Viewer-ASN": "$input.params().header.get('CloudFront-Viewer-ASN')",
        "CloudFront-Viewer-Country": "$input.params().header.get('CloudFront-Viewer-Country')",
        "Host": "$input.params().header.get('Host')",
        "User-Agent": "$input.params().header.get('User-Agent')",
        "Via": "$input.params().header.get('Via')",
        "X-Amz-Cf-Id": "$input.params().header.get('X-Amz-Cf-Id')",
        "X-Amzn-Trace-Id": "$input.params().header.get('X-Amzn-Trace-Id')",
        "X-Forwarded-For": "$input.params().header.get('X-Forwarded-For')",
        "X-Forwarded-Port": "$input.params().header.get('X-Forwarded-Port')",
        "X-Forwarded-Proto": "$input.params().header.get('X-Forwarded-Proto')",
        "content-type": "$input.params().header.get('content-type')",
        "x-api-key": "$input.params().header.get('x-api-key')",

        ## Adiciona os valores do authorizer
        #if($context.authorizer)
        "X-user-pool": "$context.authorizer.X-user-pool",
        "X-authenticated-user": "$context.authorizer.X-authenticated-user",
        "X-expires": "$context.authorizer.X-expires",
        "X-hash-authorities": "$context.authorizer.X-hash-authorities"
        #end
    },
    "queryStringParameters": $input.params().querystring,
    "pathParameters": $input.params().path,
    "stageVariables": $stageVariables,
    "requestContext": {
        "accountId": "$context.accountId",
        "resourceId": "$context.resourceId",
        "stage": "$context.stage",
        "domainName": "$context.domainName",
        "domainPrefix": "$context.domainPrefix",
        "requestId": "$context.requestId",
        "extendedRequestId": "$context.extendedRequestId",
        "protocol": "$context.protocol",
        "identity": {
            "apiKey": "$context.identity.apiKey",
            "apiKeyId": "$context.identity.apiKeyId",
            "sourceIp": "$context.identity.sourceIp",
            "userAgent": "$context.identity.userAgent"
        },
        "resourcePath": "$context.resourcePath",
        "path": "$context.path",
        "authorizer": {
            "X-user-pool": "$context.authorizer.X-user-pool",
            "X-authenticated-user": "$context.authorizer.X-authenticated-user",
            "X-expires": "$context.authorizer.X-expires",
            "X-hash-authorities": "$context.authorizer.X-hash-authorities"
        },
        "httpMethod": "$context.httpMethod",
        "requestTime": "$context.requestTime",
        "requestTimeEpoch": $context.requestTimeEpoch,
        "apiId": "$context.apiId"
    },
    ## Se body não estiver vazio, mantém. Se estiver vazio, define como string vazia.
    "body": #if($input.body != "") "$input.body" #else "" #end,
    "isBase64Encoded": false
}
EOF
  }
}
```

**4. method.tf**

- 📍 **Caminho:** `method.tf`
- 📏 **Tamanho:** 485.0 B

```tf
resource "aws_api_gateway_method" "default" {
  authorization     = var.authorization
  http_method       = var.verb
  resource_id       = var.resource_id
  rest_api_id       = var.rest_api_id
  api_key_required  = var.api_key_required
  request_parameters = var.method_request_parameters
  authorizer_id      = var.authorizer_id
  request_models = var.method_request_models
  request_validator_id = var.method_request_validator_id
  lifecycle {
    create_before_destroy = true
  }
}
```

**5. method_response.tf**

- 📍 **Caminho:** `method_response.tf`
- 📏 **Tamanho:** 517.0 B

```tf
resource "aws_api_gateway_method_response" "default" {
  depends_on                = [ aws_api_gateway_method.default]
  http_method               = aws_api_gateway_method.default.http_method
  resource_id               = var.resource_id
  rest_api_id               = var.rest_api_id
  status_code               = var.method_response_status_code
  response_models           = var.method_response_models
  response_parameters       = var.method_response_parameters
  lifecycle {
    create_before_destroy = true
  }
}
```

**6. roles-parameter-store.tf**

- 📍 **Caminho:** `roles-parameter-store.tf`
- 📏 **Tamanho:** 304.0 B

```tf
resource "aws_ssm_parameter" "roles_parameter" {
  count = length(var.roles) > 0 ? 1 : 0
  name = "/api-gateway/${var.rest_api_id}/${var.resource_id}/${var.verb}/roles"
  type = "String"
  value = join(",", var.roles)
  tags = {
    ApiGatewayId = var.rest_api_id
    BelogsToAuthorization = true
  }
}
```

**7. variable.tf**

- 📍 **Caminho:** `variable.tf`
- 📏 **Tamanho:** 1.6 KB

```tf
variable "verb" {
  type = string
}

variable "authorization" {
  type = string
  default = "NONE"
}

variable "resource_id" {
  type = string
}

variable "rest_api_id" {
  type = string
}

variable "api_key_required" {
  type = string
  default = false
}

variable "method_request_parameters" {
  type = map(string)
  default = {}
}

variable "method_request_validator_id" {
  type = string
  default = null
}

variable "method_request_models" {
  type = map(string)
  default = {}
}

variable "uri" {
  type = string
}

variable "integration_request_parameters" {
  type = map(string)
  default = {}
}

variable "integration_request_templates" {
  type = map(string)
  default = {}
}

variable "integration_type" {
  type = string
  default = "AWS_PROXY"
}

variable "integration_http_method" {
  default = "POST"
  type = string
}

variable "method_response_status_code" {
  default = "200"
  type = string
}

variable "method_response_models" {
  default = {
    "application/json" = "Empty"
  }
  type = map(string)
}

variable "method_response_parameters" {
  default = {}
  type = map(string)
}

variable "has_integration_response" {
  type = bool
  default = false
}

variable "integration_response_status_code" {
  type = string
}

variable "integration_response_http_method" {
  type = string
}

variable "integration_response_response_templates" {
  type = map(string)
  default = {}
}
variable "integration_response_response_parameters" {
  type = map(string)
  default = {}
}



... (arquivo truncado - mostrando apenas 100 linhas de 114 total)
```

